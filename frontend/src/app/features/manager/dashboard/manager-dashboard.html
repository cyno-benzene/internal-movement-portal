<div class="dashboard-container">
  <!-- Stats Cards -->
  <mat-grid-list cols="4" rowHeight="150px" gutterSize="20px" class="stats-grid">
    <mat-grid-tile>
      <mat-card class="stats-card">
        <mat-card-content>
          <div class="stat-number">{{ jobStats.totalJobs }}</div>
          <div class="stat-label">Total Jobs</div>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>
    
    <mat-grid-tile>
      <mat-card class="stats-card">
        <mat-card-content>
          <div class="stat-number pending">{{ jobStats.activeJobs }}</div>
          <div class="stat-label">Active Jobs</div>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>
    
    <mat-grid-tile>
      <mat-card class="stats-card">
        <mat-card-content>
          <div class="stat-number approved">{{ jobStats.closedJobs }}</div>
          <div class="stat-label">Closed Jobs</div>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>
    
    <mat-grid-tile>
      <mat-card class="stats-card">
        <mat-card-content>
          <div class="stat-number rejected">{{ jobStats.draftJobs }}</div>
          <div class="stat-label">Draft Jobs</div>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>
  </mat-grid-list>

  <!-- Main Content -->
  <mat-tab-group class="dashboard-tabs">
    <!-- My Jobs Tab -->
    <mat-tab label="My Jobs">
      <div class="tab-content">
        <div class="jobs-actions">
          <button mat-raised-button color="primary" routerLink="/jobs/create">
            <mat-icon>add</mat-icon>
            Create New Job
          </button>
        </div>

        <div *ngIf="myJobs.length === 0" class="no-data">
          No jobs found. Create your first job posting!
        </div>

        <mat-table [dataSource]="myJobs" class="jobs-table" *ngIf="myJobs.length > 0">
          <ng-container matColumnDef="title">
            <mat-header-cell *matHeaderCellDef>Position</mat-header-cell>
            <mat-cell *matCellDef="let job">
              <div class="job-info">
                <strong>{{ job.title }}</strong>
                <small>{{ job.team }}</small>
              </div>
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="status">
            <mat-header-cell *matHeaderCellDef>Status</mat-header-cell>
            <mat-cell *matCellDef="let job">
              <div class="status-container">
                <span class="status-badge" [ngClass]="getStatusClass(job.status)">
                  {{ job.status }}
                </span>
                <span *ngIf="job.priority === 'high_importance'" class="priority-flag" matTooltip="High Importance">
                  <mat-icon class="priority-icon">priority_high</mat-icon>
                </span>
              </div>
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="created_date">
            <mat-header-cell *matHeaderCellDef>Posted</mat-header-cell>
            <mat-cell *matCellDef="let job">
              {{ job.created_at | date:'shortDate' }}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="candidates">
            <mat-header-cell *matHeaderCellDef>Candidates</mat-header-cell>
            <mat-cell *matCellDef="let job">
              <span *ngIf="job.matching_status === 'matched'" class="candidates-info">
                <mat-icon>group</mat-icon> Available
              </span>
              <span *ngIf="job.matching_status !== 'matched'" class="candidates-info pending">
                <mat-icon>hourglass_empty</mat-icon> Pending
              </span>
            </mat-cell>
          </ng-container>

          <mat-header-row *matHeaderRowDef="jobColumns"></mat-header-row>
          <mat-row *matRowDef="let job; columns: jobColumns;" 
                   class="clickable-row"
                   (click)="navigateToJob(job.id)"
                   matRipple></mat-row>
        </mat-table>
      </div>
    </mat-tab>
  </mat-tab-group>
</div>
